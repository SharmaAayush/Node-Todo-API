<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:13,&quot;tests&quot;:48,&quot;passes&quot;:48,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2018-05-13T10:56:53.372Z&quot;,&quot;end&quot;:&quot;2018-05-13T10:57:39.863Z&quot;,&quot;duration&quot;:46491,&quot;testsRegistered&quot;:48,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;fd39a71a-b212-46f9-97ec-3fe08937cf0b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook: populateUsers&quot;,&quot;fullTitle&quot;:&quot; \&quot;before each\&quot; hook: populateUsers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(0);\nUser.remove({}).then(() =&gt; {\n  let userOne = new User(users[0]).save();\n  let userTwo = new User(users[1]).save();\n  let userThree = new User(users[2]).save();\n  return Promise.all([userOne, userTwo, userThree]);\n}, e =&gt; console.log(e)).then(() =&gt; done());&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:true,&quot;uuid&quot;:&quot;60581418-48da-47ce-9c32-a75188a612c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook: populateTodos&quot;,&quot;fullTitle&quot;:&quot; \&quot;before each\&quot; hook: populateTodos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(0);\nTodo.remove({}).then(() =&gt; {\n  return Todo.insertMany(todos);\n}, e =&gt; console.log(e)).then(() =&gt; done());&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:true,&quot;uuid&quot;:&quot;c8069ba3-6253-41b5-ae4d-c7cd870db7ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;caf17bc0-fe3a-4f3a-88bf-70fbd7e6dc1f&quot;,&quot;title&quot;:&quot;User Route Tests&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a0fc3c50-8ba7-4036-8393-a0e0270a1522&quot;,&quot;title&quot;:&quot;POST /users&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new user&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users should create a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:388,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let username = &#x27;testUser&#x27;;\nlet email = &#x27;testUser@example.com&#x27;;\nlet password = &#x27;testPassword&#x27;;\nrequest(app)\n  .post(&#x27;/users&#x27;)\n  .send({username, email, password})\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(res.body._id).then((user) =&gt; {\n      expect(user).toBeTruthy();\n      expect(user.password).not.toBe(password);\n      expect(user.username).toBe(username);\n      done();\n    }).catch(err =&gt; done(err));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;66cb91b9-c0ed-462b-ba7c-15cd87c11111&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return validation error if request is invalid&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users should return validation error if request is invalid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let username = &#x27;testUser&#x27;;\nlet email = &#x27;testUser&#x27;;\nlet password = &#x27;testPassword&#x27;;\nrequest(app)\n  .post(&#x27;/users&#x27;)\n  .send({username, email, password})\n  .expect(400)\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b78535cd-69cd-49f3-ada1-1b41af796972&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an error for requests with incomplete data&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users should return an error for requests with incomplete data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let email = \&quot;testUser@example.com\&quot;;\nlet password = \&quot;testPassword\&quot;;\nrequest(app)\n  .post(&#x27;/users&#x27;)\n  .send({email, password})\n  .expect(400)\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4708f934-86b1-411a-8671-f1f0ec5e03a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create a user if the email is already in use&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users should not create a user if the email is already in use&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:347,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let username = &#x27;testUser&#x27;;\nlet email = users[0].email;\nlet password = &#x27;testPassword&#x27;;\nrequest(app)\n  .post(&#x27;/users&#x27;)\n  .send({username, email, password})\n  .expect(400)\n  .end(done)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;848e6c02-6af6-47d9-a16b-959fb90c62a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66cb91b9-c0ed-462b-ba7c-15cd87c11111&quot;,&quot;b78535cd-69cd-49f3-ada1-1b41af796972&quot;,&quot;4708f934-86b1-411a-8671-f1f0ec5e03a1&quot;,&quot;848e6c02-6af6-47d9-a16b-959fb90c62a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:751,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af37c71b-3ca4-4f72-9783-2bdb96444e31&quot;,&quot;title&quot;:&quot;GET /users/me&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return user if authenticated&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/me should return user if authenticated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/me&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(200)\n  .expect((res) =&gt; {\n    expect(res.body._id).toBe(users[0]._id.toHexString());\n    expect(res.body.email).toBe(users[0].email);\n    expect(res.body.emailVarified).toBe(users[0].emailVarified);\n    expect(res.body.username).toBe(users[0].username);\n  })\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1f78383c-674e-4f8e-b0c0-0c200d9f2526&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if unauthenticated user sends request&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/me should return an authentication error if unauthenticated user sends request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/me&#x27;)\n  .expect(401)\n  .expect((res) =&gt; {\n    expect(res.body).toEqual({});\n  })\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fb0c7837-0071-4c0b-885a-8ffb8193041e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/me should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .get(&#x27;/users/me&#x27;)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4b265c7c-ab88-48fe-9609-f4cedb87f079&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f78383c-674e-4f8e-b0c0-0c200d9f2526&quot;,&quot;fb0c7837-0071-4c0b-885a-8ffb8193041e&quot;,&quot;4b265c7c-ab88-48fe-9609-f4cedb87f079&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6f0cf18d-e97b-4009-89ce-fc04e233803d&quot;,&quot;title&quot;:&quot;POST /users/login&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login a valid user and return auth token&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users/login should login a valid user and return auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:318,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(&#x27;/users/login&#x27;)\n  .send({\n    email: users[1].email,\n    password: users[1].password\n  })\n  .expect(200)\n  .expect((res) =&gt; {\n    expect(res.headers[&#x27;x-auth&#x27;]).toBeTruthy();\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(users[1]._id).then((user) =&gt; {\n      expect(user.toObject().tokens[1]).toMatchObject({\n        access: &#x27;auth&#x27;,\n        token: res.headers[&#x27;x-auth&#x27;]\n      });\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;08a1f552-4d92-4327-9eb5-c28fb20989d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject invalid login&quot;,&quot;fullTitle&quot;:&quot;User Route Tests POST /users/login should reject invalid login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .post(&#x27;/users/login&#x27;)\n  .send({\n    email: users[1].email,\n    password: users[1].password + 1\n  })\n  .expect(400)\n  .expect(res =&gt; {\n    expect(res.headers[&#x27;x-auth&#x27;]).toBeFalsy();\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(users[1]._id).then((user) =&gt; {\n      expect(user.tokens.length).toBe(1);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7abddeee-184a-49eb-be61-fdb2858b02b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08a1f552-4d92-4327-9eb5-c28fb20989d2&quot;,&quot;7abddeee-184a-49eb-be61-fdb2858b02b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:625,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7725d130-f294-441d-a331-dd8fc41d16a9&quot;,&quot;title&quot;:&quot;DELETE /users/me/token&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove auth token on logout&quot;,&quot;fullTitle&quot;:&quot;User Route Tests DELETE /users/me/token should remove auth token on logout&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/users/me/token&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(users[0]._id).then(user =&gt; {\n      expect(user.tokens.length).toBe(0);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ff0ee598-df28-4ec1-878b-6b072628acb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 401 error for unauthenticated access&quot;,&quot;fullTitle&quot;:&quot;User Route Tests DELETE /users/me/token should return a 401 error for unauthenticated access&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/users/me/token&#x27;)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fbf136da-11d7-45af-a520-b18ce7821a03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 401 error if authentication token used was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;User Route Tests DELETE /users/me/token should return a 401 error if authentication token used was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .delete(&#x27;/users/me/token&#x27;)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f8c13195-9967-45db-9f0e-2bec940b697f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff0ee598-df28-4ec1-878b-6b072628acb5&quot;,&quot;fbf136da-11d7-45af-a520-b18ce7821a03&quot;,&quot;f8c13195-9967-45db-9f0e-2bec940b697f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a44e7c13-c000-4abf-99e2-0a98fc11d54c&quot;,&quot;title&quot;:&quot;GET /users/emailVerification&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should generate a email verification link for authenticated users&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/emailVerification should generate a email verification link for authenticated users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/emailVerification&#x27;)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .expect(200)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(users[2]._id).then(user =&gt; {\n      expect(user.emailVerificationLink).toBeTruthy();\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ccd378aa-d3b1-4b29-81bb-8588fbd58930&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should reject unauthenticated acces with a 401 error code&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/emailVerification should reject unauthenticated acces with a 401 error code&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/emailVerification&#x27;)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6f1ef8f2-40c8-461f-9a13-30cbe972e16c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 401 error if authentication token being used was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/emailVerification should return a 401 error if authentication token being used was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\n\nrequest(app)\n  .get(&#x27;/users/emailVerification&#x27;)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end(done);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e2feefa6-9f41-4bd6-81a8-772b74296abc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ccd378aa-d3b1-4b29-81bb-8588fbd58930&quot;,&quot;6f1ef8f2-40c8-461f-9a13-30cbe972e16c&quot;,&quot;e2feefa6-9f41-4bd6-81a8-772b74296abc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9d6d9ace-0a0a-4f04-81c4-94600cf741d8&quot;,&quot;title&quot;:&quot;GET /users/verify&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should verify the user&#x27;s email when requested with proper query parameters&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/verify should verify the user&#x27;s email when requested with proper query parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/verify&#x27;)\n  .query({\n    email: users[2].email,\n    vk: users[2].emailVerificationLink.toHexString()\n  })\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.user.email).toBe(users[2].email);\n    expect(res.body.user.emailVarified).toBeTruthy();\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    User.findById(users[2]._id).then(user =&gt; {\n      expect(user.emailVarified).toBeTruthy();\n      expect(user.email).toBe(res.body.user.email);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7d5c12b-c51e-481e-a182-2feecfdb5ac1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 400 error for request without query parameters&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/verify should return a 400 error for request without query parameters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/verify&#x27;)\n  .expect(400)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9063d058-2029-494f-9751-dbcf7d26dd33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 400 error with a message if a user with provided email does not exist&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/verify should return a 400 error with a message if a user with provided email does not exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/verify&#x27;)\n  .query({\n    email: &#x27;invalidUser@example.com&#x27;,\n    vk: new ObjectID().toHexString()\n  })\n  .expect(400)\n  .expect(res =&gt; {\n    expect(res.body.error).toBeTruthy();\n    expect(typeof res.body.error).toBe(\&quot;string\&quot;);\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;07aa98dd-02dc-4064-9912-6e72c7bf4aa4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 400 if verification query param was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;User Route Tests GET /users/verify should return a 400 if verification query param was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/users/verify&#x27;)\n  .query({\n    email: users[2].email,\n    vk: new ObjectID().toHexString()\n  })\n  .expect(400)\n  .expect(res =&gt; {\n    expect(res.body.error).toBeTruthy();\n    expect(typeof res.body.error).toBe(\&quot;string\&quot;);\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;20b1e5ec-f643-4a9f-8990-82915dd4425f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7d5c12b-c51e-481e-a182-2feecfdb5ac1&quot;,&quot;9063d058-2029-494f-9751-dbcf7d26dd33&quot;,&quot;07aa98dd-02dc-4064-9912-6e72c7bf4aa4&quot;,&quot;20b1e5ec-f643-4a9f-8990-82915dd4425f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2046605d-6cf7-4cad-b239-37fb58ab5844&quot;,&quot;title&quot;:&quot;Todo Route Tests&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8e6c32d0-61db-494c-aadf-252d2ff1c169&quot;,&quot;title&quot;:&quot;POST /todos&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 error for unauthenticated access to this route&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should return 401 error for unauthenticated access to this route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;35c6104d-0fc8-4bc4-b6db-d2663aff33c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nlet todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, token)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;767d6cf3-e811-4420-92a2-fa6914cfd7e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 error for user accessing this route without verifying their email&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should return 401 error for user accessing this route without verifying their email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;354bf62f-3b7b-46d0-8753-699590c6636a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create a new todo if incomplete todo is provided&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should not create a new todo if incomplete todo is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(400)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;352f6d19-4ee8-458b-8b4a-b3e6cb6b080f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new todo if an authenticated user requests with with valid todo&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should create a new todo if an authenticated user requests with with valid todo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.title).toBe(todo.title);\n    expect(res.body.description).toBe(todo.description);\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.findById(res.body._id).then(todo =&gt; {\n      expect(todo.title).toBe(res.body.title);\n      expect(todo._creator.toHexString()).toBe(users[0]._id.toHexString());\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3e061c33-14b9-4b84-ade4-a283c85df0fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should create a new todo without reminder if invalid reminder date was provided&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should create a new todo without reminder if invalid reminder date was provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;,\n  reminder: &#x27;invalid date format&#x27;\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.reminder).toBeFalsy();\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.findById(res.body._id).then(todo =&gt; {\n      expect(todo._creator.toHexString()).toBe(users[0]._id.toHexString());\n      expect(todo.reminder).toBeFalsy();\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a888edb9-e9c1-4d2e-92b0-32ca9e9ae322&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not take the completedAt attribute value from the user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests POST /todos should not take the completedAt attribute value from the user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: &#x27;testTodoTitle&#x27;,\n  description: &#x27;testDescription&#x27;,\n  completed: true,\n  completedAt: 24514\n};\nrequest(app)\n  .post(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.title).toBe(todo.title);\n    expect(res.body.description).toBe(todo.description);\n    expect(res.body.completed).toBe(todo.completed);\n    expect(new Date(res.body.completedAt).getTime()).not.toBe(new Date(todo.completedAt).getTime());\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.findById(res.body._id).then(data =&gt; {\n      expect(data._creator.toHexString()).toBe(users[0]._id.toHexString());\n      expect(data.completed).toBe(true);\n      expect(new Date(data.completedAt).getTime()).not.toBe(new Date(todo.completedAt).getTime());\n      expect(new Date(data.completedAt).getTime()).toBe(new Date(res.body.completedAt).getTime());\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;352960c2-8515-4778-940c-a09604de38dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;35c6104d-0fc8-4bc4-b6db-d2663aff33c2&quot;,&quot;767d6cf3-e811-4420-92a2-fa6914cfd7e1&quot;,&quot;354bf62f-3b7b-46d0-8753-699590c6636a&quot;,&quot;352f6d19-4ee8-458b-8b4a-b3e6cb6b080f&quot;,&quot;3e061c33-14b9-4b84-ade4-a283c85df0fa&quot;,&quot;a888edb9-e9c1-4d2e-92b0-32ca9e9ae322&quot;,&quot;352960c2-8515-4778-940c-a09604de38dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:62,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c489e59d-bea2-47b1-8c07-94ea0b228e7d&quot;,&quot;title&quot;:&quot;GET /todos&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a 401 error for unauthenticated access to this route&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos should return a 401 error for unauthenticated access to this route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/todos&#x27;)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6e29a15f-4bc3-4de6-b254-86dcb7f04a82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .get(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ce3a8282-c4fe-4ecd-9a0b-6881c634f75f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 401 error for user accessing this route without verifying their email first&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos should return a 401 error for user accessing this route without verifying their email first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;10dab541-41e3-48f7-861d-4113cde1d1ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return all todos of an authenticated user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos should return all todos of an authenticated user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/todos&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.todos.length).toBe(1);\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.find({_creator: users[0]._id}).then(todos =&gt; {\n      expect(todos.length).toBe(res.body.todos.length);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dc255ea0-9466-45ef-8045-748ef13ecede&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e29a15f-4bc3-4de6-b254-86dcb7f04a82&quot;,&quot;ce3a8282-c4fe-4ecd-9a0b-6881c634f75f&quot;,&quot;10dab541-41e3-48f7-861d-4113cde1d1ff&quot;,&quot;dc255ea0-9466-45ef-8045-748ef13ecede&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d6d4018e-9ed5-4cc5-9c39-1fe384cc65e2&quot;,&quot;title&quot;:&quot;GET /todos/:id&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 for unauthenticated access tto this route&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return 401 for unauthenticated access tto this route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(`/todos/${todos[0]._id}`)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e145e155-67ed-4aee-abf1-24cddfe81800&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .get(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;61f98e64-1335-4e2e-9779-b24362488f04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 error for user accessing this route without verifying their email first&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return 401 error for user accessing this route without verifying their email first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39972cce-be06-4292-98f5-4823411b7f40&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 error if invalid todo id is used&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return 404 error if invalid todo id is used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(&#x27;/todos/24514221&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(404)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e86bfb83-11b6-4684-8fcc-fc33fd72a126&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if the token&#x27;s id doesn&#x27;t belong to the user requesting for the todo&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return 404 if the token&#x27;s id doesn&#x27;t belong to the user requesting for the todo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(`/todos/${todos[1]._id}`)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(404)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c742ad02-adc5-4b2a-831d-20dd5fb82906&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the todo if an authenticated user requests for a todo belonging to him&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests GET /todos/:id should return the todo if an authenticated user requests for a todo belonging to him&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .get(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.todo._id).toBe(todos[0]._id.toHexString());\n    expect(res.body.todo.title).toBe(todos[0].title);\n    expect(res.body.todo.description).toBe(todos[0].description);\n    expect(res.body.todo._creator).toBe(todos[0]._creator.toHexString());\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.findOne({_id: res.body.todo._id, _creator: res.body.todo._creator}).then(todo =&gt; {\n      expect(todo._id.toHexString()).toBe(todos[0]._id.toHexString());\n      expect(todo._creator.toHexString()).toBe(todos[0]._creator.toHexString());\n      expect(todo.title).toBe(todos[0].title);\n      expect(todo.description).toBe(todos[0].description);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7bbb11ba-0872-404d-94b0-96e4cfccb6e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e145e155-67ed-4aee-abf1-24cddfe81800&quot;,&quot;61f98e64-1335-4e2e-9779-b24362488f04&quot;,&quot;39972cce-be06-4292-98f5-4823411b7f40&quot;,&quot;e86bfb83-11b6-4684-8fcc-fc33fd72a126&quot;,&quot;c742ad02-adc5-4b2a-831d-20dd5fb82906&quot;,&quot;7bbb11ba-0872-404d-94b0-96e4cfccb6e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3450ac18-10c8-4928-ace6-4cc6b9c81340&quot;,&quot;title&quot;:&quot;DELETE /todos/:id&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 for unauthenticated access tto this route&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should return 401 for unauthenticated access tto this route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(`/todos/${todos[0]._id}`)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4c2e96f1-e126-4ae2-a92c-a4179384ea92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .delete(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, token)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1ba0a647-b430-423a-aa85-36c850d8ccf2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 error for user accessing this route without verifying their email first&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should return 401 error for user accessing this route without verifying their email first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9af0d731-5b94-4fa9-9994-13602d552be5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 error if invalid todo id is used&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should return 404 error if invalid todo id is used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(&#x27;/todos/24514221&#x27;)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(404)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;78194580-9189-4fcf-ba45-11555cab0e07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not delete the todo if it doesn&#x27;t belong to the requesting user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should not delete the todo if it doesn&#x27;t belong to the requesting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[1].tokens[0].token)\n  .expect(404)\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.find({_creator: users[0]._id}).then(todos =&gt; {\n      expect(todos.length).toBe(1);\n      expect(todos[0]._id.toHexString()).toBe(todos[0]._id.toHexString());\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;61582c68-9c3a-4881-af03-cfcb77ce35e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete the todo if it belongs to the requesting user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests DELETE /todos/:id should delete the todo if it belongs to the requesting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;request(app)\n  .delete(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.todo._id).toBe(todos[0]._id.toHexString());\n    expect(res.body.todo.title).toBe(todos[0].title);\n    expect(res.body.todo.description).toBe(todos[0].description);\n    expect(res.body.todo._creator).toBe(todos[0]._creator.toHexString());\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    \n    Todo.find({_creator: users[0]._id}).then(todos =&gt; {\n      expect(todos.length).toBe(0);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dbd6e7c8-10ae-42f5-822a-155ad429954f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c2e96f1-e126-4ae2-a92c-a4179384ea92&quot;,&quot;1ba0a647-b430-423a-aa85-36c850d8ccf2&quot;,&quot;9af0d731-5b94-4fa9-9994-13602d552be5&quot;,&quot;78194580-9189-4fcf-ba45-11555cab0e07&quot;,&quot;61582c68-9c3a-4881-af03-cfcb77ce35e5&quot;,&quot;dbd6e7c8-10ae-42f5-822a-155ad429954f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;180dff33-ccdd-40ee-bb44-101b2050c727&quot;,&quot;title&quot;:&quot;PATCH /todos/:id&quot;,&quot;fullFile&quot;:&quot;E:\\Major Project\\Node-Todo\\server\\tests\\server.spec.js&quot;,&quot;file&quot;:&quot;\\server\\tests\\server.spec.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 401 for unauthenticated access to this route&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should return 401 for unauthenticated access to this route&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nrequest(app)\n  .patch(`/todos/${todos[0]._id}`)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6b65f275-9e55-4ba7-9b79-19a0dd262c7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an authentication error if authentication token was not generated by the backend&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should return an authentication error if authentication token was not generated by the backend&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nlet token = jwt.sign({\n  _id: users[0]._id.toHexString(),\n  access: &#x27;auth&#x27;\n}, &#x27;some secret used by user to generate custom token&#x27;).toString();\nrequest(app)\n  .patch(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, token)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bfb966d5-871b-4dc4-bfab-796aefceb5a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 401 error for user accessing this route without verifying their email first&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should return 401 error for user accessing this route without verifying their email first&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nrequest(app)\n  .patch(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[2].tokens[0].token)\n  .send(todo)\n  .expect(401)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d7c52e32-812e-4df2-b858-759e7c38f8c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 error if invalid todo id is used&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should return 404 error if invalid todo id is used&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nrequest(app)\n  .patch(`/todos/24514221`)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(404)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;090f7718-e4c1-4951-8952-73cbd8c187d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update todo if it doesn&#x27;t belong to the requesting user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should not update todo if it doesn&#x27;t belong to the requesting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nrequest(app)\n  .patch(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[1].tokens[0].token)\n  .send(todo)\n  .expect(404)\n  .end(err =&gt; {\n    if (err) {\n      return done(err);\n    }\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39d3a0f5-7df2-45ed-af94-d8eddfc72f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the todo if it belongs to the requesting user&quot;,&quot;fullTitle&quot;:&quot;Todo Route Tests PATCH /todos/:id should update the todo if it belongs to the requesting user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let todo = {\n  title: \&quot;updatedTestTodo\&quot;,\n  completed: true\n};\nrequest(app)\n  .patch(`/todos/${todos[0]._id}`)\n  .set(&#x27;x-auth&#x27;, users[0].tokens[0].token)\n  .send(todo)\n  .expect(200)\n  .expect(res =&gt; {\n    expect(res.body.todo._id).toBe(todos[0]._id.toHexString());\n    expect(res.body.todo.title).toBe(todo.title);\n    expect(res.body.todo.completed).toBe(todo.completed);\n    expect(res.body.todo.completedAt).toBeTruthy();\n  })\n  .end((err, res) =&gt; {\n    if (err) {\n      return done(err);\n    }\n    Todo.findById(todos[0]._id).then(data =&gt; {\n      expect(data._id.toHexString()).toBe(res.body.todo._id);\n      done();\n    }).catch(e =&gt; done(e));\n  });&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;05f087b2-525a-425e-a384-19d69559bcdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b65f275-9e55-4ba7-9b79-19a0dd262c7d&quot;,&quot;bfb966d5-871b-4dc4-bfab-796aefceb5a9&quot;,&quot;d7c52e32-812e-4df2-b858-759e7c38f8c8&quot;,&quot;090f7718-e4c1-4951-8952-73cbd8c187d4&quot;,&quot;39d3a0f5-7df2-45ed-af94-d8eddfc72f0b&quot;,&quot;05f087b2-525a-425e-a384-19d69559bcdd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2018}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;Node-Todo&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;E:\\Major Project\\Node-Todo\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;E:\\Major Project\\Node-Todo\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>